            <div class="section">
                <h2>Recommendations</h2>
                
                {% set critical_extensions = [] %}
                {% for data in extension_data %}
                {% if data.risk_summary.risk_level == 'critical' %}
                {% set critical_extensions = critical_extensions|merge([data]) %}
                {% endif %}
                {% endfor %}

                {% if critical_extensions|length > 0 %}
                <div class="recommendations">
                    <h3>⚠️ Immediate Actions Required</h3>
                    <p><strong>Critical Risk Extensions</strong> ({{ critical_extensions|length }} extensions require immediate attention):</p>
                    <ul>
                    {% for data in critical_extensions %}
                        <li><strong>{{ data.extension.key }}</strong>:
                        <ul>
                        {% if data.version_analysis and data.version_analysis.recommendations %}
                            {% for recommendation in data.version_analysis.recommendations %}
                            <li>{{ recommendation }}</li>
                            {% endfor %}
                        {% endif %}
                        {% if data.loc_analysis and data.loc_analysis.recommendations %}
                            {% for recommendation in data.loc_analysis.recommendations %}
                            <li>{{ recommendation }}</li>
                            {% endfor %}
                        {% endif %}
                        {% if data.rector_analysis and data.rector_analysis.recommendations %}
                            {% for recommendation in data.rector_analysis.recommendations %}
                            <li>{{ recommendation }}</li>
                            {% endfor %}
                        {% endif %}
                        </ul>
                        </li>
                    {% endfor %}
                    </ul>
                </div>
                {% else %}
                <div class="recommendations">
                    <h3>✅ Good News!</h3>
                    <p>No critical risk extensions found. Your upgrade path should be relatively smooth.</p>
                </div>
                {% endif %}
                
                <h3>Migration Planning</h3>
                
                <div class="phase">
                    <h4>Phase 1 - Low Risk Extensions ({{ statistics.risk_distribution.low }} extensions)</h4>
                    <p>Start with these extensions as they have minimal compatibility issues.</p>
                    <p><strong>Expected success rate:</strong> 95%+</p>
                </div>
                
                <div class="phase">
                    <h4>Phase 2 - Medium Risk Extensions ({{ statistics.risk_distribution.medium }} extensions)</h4>
                    <p>Require testing and potential minor code changes.</p>
                    <p><strong>Expected success rate:</strong> 80-90%</p>
                </div>
                
                <div class="phase">
                    <h4>Phase 3 - High Risk Extensions ({{ statistics.risk_distribution.high }} extensions)</h4>
                    <p>Require significant testing and likely code modifications.</p>
                    <p><strong>Expected success rate:</strong> 60-80%</p>
                </div>
                
                <div class="phase">
                    <h4>Phase 4 - Critical Risk Extensions ({{ statistics.risk_distribution.critical }} extensions)</h4>
                    <p>May require complete replacement or major refactoring.</p>
                    <p><strong>Expected success rate:</strong> 30-60%</p>
                </div>
            </div>
<div class="section">
    <h2>Vorbemerkungen</h2>

    <p><strong>Ziel dieses Dokuments ist die Definition von Anforderungen im Rahmen eines TYPO3-Upgrades der Webseite</strong>
    <a href="https://www.abda.de/">https://www.abda.de/</a>
    <strong>von Version TYPO3 v11 auf TYPO3 v13</strong></p>

    <h3>Grundlage</h3>

    <p>Als Grundlage wird aktuelle Produktivumgebung (TYPO3 v11)
    <a href="https://www.abda.de/typo3">https://www.abda.de/typo3</a> benutzt. Basierend darauf prüft coding. powerful. systems. CPS GmbH die verwendeten Komponenten inkl. der Datenbankstruktur sowie -beziehungen und trifft Aussagen für die technische Modernisierung. Dabei werden Möglichkeiten einer weiteren Verwendung von vorhandenen Modulen, Extensions und Features geprüft.</p>

    <p><br>Der Umfang benötigter Anpassungen für ein Upgrade hin zur TYPO3 LTS v13 wird in dieser Aufwandschätzung zusammengetragen.</p>

    <h3>Basis-CMS-Funktionen</h3>

    <p>Es gelten die für die Version 13.x LTS beschriebene Standardfunktionalitäten.</p>

    <h3>Upgrade - Schritte auf LTS v13</h3>

    <ul>
        <li>Upgrade vorbereiten</li>
        <li>Das Upgrade durchführen</li>
        <li>Extensions aktualisieren</li>
        <li>Korrekturen in den Templates der Extensions</li>
        <li>Sprachpakete aktualisieren</li>
        <li>Aufräumen</li>
    </ul>

    <div class="page-break-after"></div>
    <h2>Aufwandsschätzung</h2>

<!-- DEBUG: estimated_hours = {{ estimated_hours|json_encode|raw }} -->
<!-- DEBUG: hourly_rate = {{ hourly_rate }} -->

{% set hourly_rate = hourly_rate ?? 960 %}
{% set server_setup_hours = estimated_hours['server-setup'] ?? 0 %}
{% set typo3_upgrade_hours = estimated_hours['typo3-bundle-upgrade'] ?? 0 %}
{% set extension_update_hours = estimated_hours['extension-update'] ?? 0 %}
{% set upgrade_doc_hours = estimated_hours['upgrade-documentation'] ?? 0 %}
{% set testing_hours = estimated_hours['component-testing'] ?? 0 %}
{% set final_migration_hours = estimated_hours['final-migration'] ?? 0 %}

{% set total_hours = server_setup_hours + typo3_upgrade_hours + extension_update_hours + upgrade_doc_hours + testing_hours + final_migration_hours %}
{% set total_cost = total_hours * hourly_rate %}

    <table style="width: 100%; margin-bottom: 20px;" class="page-break-inside-avoid">
        <thead>
            <tr>
                <th style="text-align: left;">Tätigkeit</th>
                <th style="text-align: right;">TYPO3 v13 (AT)</th>
                <th style="text-align: right;">TYPO3 v13 (€)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Aufsetzen neuer Server und Anpassung der Deployment-Struktur (ServerAdmin)</td>
                <td style="text-align: right;">{{ server_setup_hours|number_format(2, ',', '.') }}</td>
                <td style="text-align: right;">{{ (server_setup_hours * hourly_rate)|number_format(2, ',', '.') }}</td>
            </tr>
            <tr>
                <td>Upgrade des TYPO3-Systems (bundle update) (Entwicklung)</td>
                <td style="text-align: right;">{{ typo3_upgrade_hours|number_format(2, ',', '.') }}</td>
                <td style="text-align: right;">{{ (typo3_upgrade_hours * hourly_rate)|number_format(2, ',', '.') }}</td>
            </tr>
            <tr>
                <td>Extensions-Update (inkl. Migration) (Entwicklung)</td>
                <td style="text-align: right;">{{ extension_update_hours|number_format(2, ',', '.') }}</td>
                <td style="text-align: right;">{{ (extension_update_hours * hourly_rate)|number_format(2, ',', '.') }}</td>
            </tr>
            <tr>
                <td>Upgrade-Dokumentation (Änderungen protokollieren) (Entwicklung)</td>
                <td style="text-align: right;">{{ upgrade_doc_hours|number_format(2, ',', '.') }}</td>
                <td style="text-align: right;">{{ (upgrade_doc_hours * hourly_rate)|number_format(2, ',', '.') }}</td>
            </tr>
            <tr>
                <td>Testing der Komponenten (QS)</td>
                <td style="text-align: right;">{{ testing_hours|number_format(2, ',', '.') }}</td>
                <td style="text-align: right;">{{ (testing_hours * hourly_rate)|number_format(2, ',', '.') }}</td>
            </tr>
            <tr>
                <td>Durchführung der Umstellung gemäß Upgrade-Dokumentation zur finalen Umstellung (QS)</td>
                <td style="text-align: right;">{{ final_migration_hours|number_format(2, ',', '.') }}</td>
                <td style="text-align: right;">{{ (final_migration_hours * hourly_rate)|number_format(2, ',', '.') }}</td>
            </tr>
            <tr style="border-top: 2px solid #333; font-weight: bold;">
                <td><strong>Gesamt:</strong></td>
                <td style="text-align: right;"><strong>{{ total_hours|number_format(2, ',', '.') }}</strong></td>
                <td style="text-align: right;"><strong>{{ total_cost|number_format(2, ',', '.') }}</strong></td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Seitenumbruch nach dem Preamble -->
<div class="page-break-after"></div>

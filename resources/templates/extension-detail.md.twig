# {{ extension.key }} - Detailed Analysis

**Generated:** {{ generated_at.format('Y-m-d H:i:s T') }}

## Extension Overview

- **Extension Key:** {{ extension.key }}
- **Current Version:** {{ extension.version ? extension.version.toString() : 'N/A' }}
- **Composer Name:** {{ extension.composerName ?: 'N/A' }}
- **Type:** {{ extension.isSystemExtension ? 'System Extension' : (extension.isLocalExtension ? 'Local Extension' : 'Third-party Extension') }}
- **Target TYPO3 Version:** {{ target_version }}

---

## Risk Assessment

{% set risk_data = extension_data.risk_summary %}
- **Overall Risk Level:** {{ risk_data.risk_level|upper }}
- **Risk Score:** {{ "%.1f"|format(risk_data.overall_risk) }}/10.0
{% if risk_data.max_risk %}
- **Maximum Risk Score:** {{ "%.1f"|format(risk_data.max_risk) }}/10.0
{% endif %}
{% if risk_data.has_errors %}
- **⚠️  Analysis Errors:** Some analyzers failed for this extension
{% endif %}

---

## Version Availability Analysis

{% if extension_data.version_analysis %}
{% set version_analysis = extension_data.version_analysis %}

### Availability Status
- **TYPO3 Extension Repository (TER):** {{ version_analysis.ter_available ? '✅ Available' : '❌ Not Available' }}
- **Packagist (Composer):** {{ version_analysis.packagist_available ? '✅ Available' : '❌ Not Available' }}
- **Git Repository:** {{ version_analysis.git_available ? '✅ Available' : '❌ Not Available' }}

### Repository Information
{% if version_analysis.git_repository_url %}
- **Repository URL:** {{ version_analysis.git_repository_url }}
{% endif %}
{% if version_analysis.git_repository_health %}
- **Repository Health:** {{ "%.0f"|format(version_analysis.git_repository_health * 100) }}%
{% endif %}
{% if version_analysis.git_latest_version %}
- **Latest Compatible Version:** {{ version_analysis.git_latest_version }}
{% endif %}

### Risk Analysis
- **Risk Score:** {{ "%.1f"|format(version_analysis.risk_score) }}/10.0
- **Risk Level:** {{ version_analysis.risk_level|upper }}

### Recommendations
{% if version_analysis.recommendations %}
{% for recommendation in version_analysis.recommendations %}
- {{ recommendation }}
{% endfor %}
{% else %}
No specific recommendations available.
{% endif %}

{% else %}
❌ **Version availability analysis was not performed or failed for this extension.**
{% endif %}

---

## Lines of Code Analysis

{% if extension_data.loc_analysis %}
{% set loc_analysis = extension_data.loc_analysis %}

### Codebase Metrics
- **Total Lines of Code:** {{ loc_analysis.total_lines|number_format }}
- **Code Lines:** {{ loc_analysis.code_lines|number_format }}
- **Comment Lines:** {{ loc_analysis.comment_lines|number_format }}
- **Blank Lines:** {{ loc_analysis.blank_lines|number_format }}

### File Statistics
- **PHP Files:** {{ loc_analysis.php_files }}
- **Average File Size:** {{ loc_analysis.average_file_size }} lines
- **Largest File:** {{ loc_analysis.largest_file_lines }} lines{% if loc_analysis.largest_file_path %} ({{ loc_analysis.largest_file_path }}){% endif %}

### Code Structure
- **Classes/Interfaces:** {{ loc_analysis.classes }}
- **Methods:** {{ loc_analysis.methods }}
- **Functions:** {{ loc_analysis.functions }}

### Complexity Assessment
{% set complexity_score = (loc_analysis.methods + loc_analysis.functions) / (loc_analysis.php_files > 0 ? loc_analysis.php_files : 1) %}
- **Complexity Score:** {{ "%.1f"|format(complexity_score) }} (methods+functions per file)
- **Complexity Level:** {% if complexity_score > 20 %}High{% elseif complexity_score > 10 %}Medium{% else %}Low{% endif %}

### Risk Analysis
- **Risk Score:** {{ "%.1f"|format(loc_analysis.risk_score) }}/10.0
- **Estimated Effort:** {% if loc_analysis.total_lines > 10000 %}High{% elseif loc_analysis.total_lines > 2000 %}Medium{% else %}Low{% endif %}

### Recommendations
{% if loc_analysis.recommendations %}
{% for recommendation in loc_analysis.recommendations %}
- {{ recommendation }}
{% endfor %}
{% else %}
No specific recommendations available.
{% endif %}

{% else %}
❌ **Lines of code analysis was not performed for this extension.** This typically occurs when:
- The extension files could not be located
- The extension is a system extension (analysis skipped)
- File access permissions prevented scanning
{% endif %}

---

## Technical Details

### Extension Files
{% if extension_data.loc_analysis %}
- **Total Files Analyzed:** {{ extension_data.loc_analysis.php_files }}
- **Extension Size:** {{ extension_data.loc_analysis.total_lines|number_format }} lines
{% endif %}

### Analysis Metadata
- **Analysis Date:** {{ generated_at.format('Y-m-d H:i:s T') }}
- **Target TYPO3 Version:** {{ target_version }}
- **Current Installation:** {{ installation.path }}

---

*[← Back to Main Report](../analysis-report.md)*

*Generated by TYPO3 Upgrade Analyzer*
